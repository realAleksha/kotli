<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-engine/architecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Architecture | Kotli</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://realaleksha.github.io/kotli/engine/architecture"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Architecture | Kotli"><meta data-rh="true" name="description" content="The template generation process involves creating output structures based on a specified layer and associated features."><meta data-rh="true" property="og:description" content="The template generation process involves creating output structures based on a specified layer and associated features."><link data-rh="true" rel="icon" href="/kotli/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://realaleksha.github.io/kotli/engine/architecture"><link data-rh="true" rel="alternate" href="https://realaleksha.github.io/kotli/engine/architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://realaleksha.github.io/kotli/engine/architecture" hreflang="x-default"><link rel="stylesheet" href="/kotli/assets/css/styles.0e53ba7d.css">
<script src="/kotli/assets/js/runtime~main.b07aa546.js" defer="defer"></script>
<script src="/kotli/assets/js/main.8e96083c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kotli/"><b class="navbar__title text--truncate">Kotli</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/realAleksha/kotli-engine" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kotli/">About</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kotli/usage">How to use</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/kotli/category/web-portal">Web Portal</a><button aria-label="Expand sidebar category &#x27;Web Portal&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/kotli/category/engine">Engine</a><button aria-label="Collapse sidebar category &#x27;Engine&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kotli/engine/concept">Concept</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kotli/engine/get_started">Get started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kotli/engine/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kotli/engine/template_overview">Template overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kotli/engine/template_creation">Create own template</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/kotli/category/templates">Templates</a><button aria-label="Expand sidebar category &#x27;Templates&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/kotli/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/kotli/category/engine"><span itemprop="name">Engine</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Architecture</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Architecture</h1></header><p>The template generation process involves creating output structures based on a specified layer and associated features.
This process is orchestrated by the <code>TemplateGenerator</code> class, which is responsible for producing templates to an output stream.
The entire operation is driven by the <code>Layer</code> data model, representing the metadata of a specific layer with configured features and attributes.</p>
<!-- -->
<ul>
<li><strong>Layer</strong> - Represents the metadata of a specific layer.</li>
<li><strong>TemplateProcessor</strong> - Prepares the template structure from the passed metadata.</li>
<li><strong>TemplateGenerator</strong> - Generates the template to the specified output stream.</li>
<li><strong>Output Structure</strong> - The resulting template streamed to the chosen output destination (File, Zip, Database, etc.).</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="layer">Layer<a href="#layer" class="hash-link" aria-label="Direct link to Layer" title="Direct link to Layer">​</a></h2>
<p>A layer represents a distinct aspect of your project, such as Frontend, Backend, Testing, etc.
In Kotli, even the top-level project is considered to be a layer.
This is because, in general, and in the future, it can be part of a more complex system.</p>
<!-- -->
<p>Layer attributes:</p>
<ul>
<li><strong>id</strong> - a unique identifier to distinct this layer from others.</li>
<li><strong>name</strong> - represents the root folder of the generated layer.</li>
<li><strong>namespace</strong> - the package name, bundle id, or application id, depending on the context.</li>
<li><strong>processorId</strong> - the id of the processor used to resolve in the template registry.</li>
<li><strong>description</strong> - a brief description of the layer.</li>
<li><strong>layers</strong> - child layers, if applicable.</li>
<li><strong>features</strong> - features to be included in the layer.</li>
</ul>
<p>Feature attributes:</p>
<ul>
<li><strong>id</strong> - a feature identifier used to find a processor responsible for including or excluding this feature.</li>
<li><strong>attributes</strong> - input attributes to be used by the processor to customize the feature.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="templateprocessor">TemplateProcessor<a href="#templateprocessor" class="hash-link" aria-label="Direct link to TemplateProcessor" title="Direct link to TemplateProcessor">​</a></h2>
<p>This class is responsible for transforming an input <code>Layer</code> into a set of rules not bound to any specific output structure.
The created set of rules is utilized by <code>TemplateGenerator</code> to construct an output structure from the given template, including only the required functionality.
Each template is associated with its own <code>TemplateProcessor</code>, and each <code>TemplateProcessor</code> <strong>operates</strong> exclusively with a <strong>single template</strong>.</p>
<!-- -->
<p>The high level relationships:</p>
<ol>
<li><strong>TemplateContext</strong>: Represents the execution context for a template.
It retains the passed <code>Layer</code> object and accumulates a set of rules to manipulate the initial template structure.</li>
<li><strong>TemplateProcessor</strong>: Responsible for processing template.</li>
<li><strong>FeatureProvider</strong>: Represents a registry of feature processors with common behavior.</li>
<li><strong>FeatureProcessor</strong>: Responsible for creating rules in <code>TemplateContext</code> to apply or remove a given feature in the generated structure.</li>
<li><strong>Rule</strong>: Responsible for modifying some specific file in the template.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rule">Rule<a href="#rule" class="hash-link" aria-label="Direct link to Rule" title="Direct link to Rule">​</a></h3>
<p>It is an essential part of every template processor. Each rule is responsible for making specific changes to a particular file in the template.
However, it is not tied to any file it modifies. The engine implements some common rules for file manipulation,
and it is possible to create new ones with any logic to operate with template generation more powerfully.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="templategenerator">TemplateGenerator<a href="#templategenerator" class="hash-link" aria-label="Direct link to TemplateGenerator" title="Direct link to TemplateGenerator">​</a></h2>
<p>The template generator is utilized to generate the necessary output structure, such as a File, Zip, Database, etc.
Usually, there&#x27;s no need to create other implementations of this class.
However, the solution is designed to be flexible, allowing the creation of any other type of output structure if necessary.</p>
<!-- -->
<p>The high level relationships:</p>
<ol>
<li><strong>TemplateRegistry</strong>: Provides <code>TemplateGenerator</code> with all required template processors.</li>
<li><strong>TemplateGenerator</strong>: Responsible for producing an output stream from passed metadata. It is associated with:<!-- -->
<ul>
<li>Creation of a <code>TemplateContext</code> from the passed <code>Layer</code>.</li>
<li>Processing metadata using set of required <code>TemplateProcessor</code>.</li>
</ul>
</li>
<li><strong>TemplateContext</strong>: Represents the execution context for a template.</li>
<li><strong>TemplateProcessor</strong>: Responsible for processing templates.</li>
</ol>
<p>In general, the whole template generation flow looks like this:</p>
<!-- -->
<p>The Engine provides out-of-the-box implementations of generators for various output streams and purposes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pathoutputgenerator">PathOutputGenerator<a href="#pathoutputgenerator" class="hash-link" aria-label="Direct link to PathOutputGenerator" title="Direct link to PathOutputGenerator">​</a></h3>
<p>This is the most common implementation, generating the output structure in the provided output folder.
By default, the target folder is set as the root directory in an in-memory file structure implementation.
It utilizes the provided TemplateRegistry to access template processors.</p>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zipoutputgenerator">ZipOutputGenerator<a href="#zipoutputgenerator" class="hash-link" aria-label="Direct link to ZipOutputGenerator" title="Direct link to ZipOutputGenerator">​</a></h3>
<p>This implementation consumes the output structure from the underlying generator and saves it as a zip archive into the provided output stream.</p>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gradleprojectgenerator">GradleProjectGenerator<a href="#gradleprojectgenerator" class="hash-link" aria-label="Direct link to GradleProjectGenerator" title="Direct link to GradleProjectGenerator">​</a></h3>
<p>This implementation consumes the output structure and proceeds with the execution of command-line commands,
treating the generated structure as a Gradle project. It executes a given set of commands as arguments for the gradlew command.
The generation process will only be considered complete after the successful execution of the provided Gradle commands.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span> </div><div class="admonitionContent_BuS1"><p>Keep in mind that the provided generator should produce a file structure on physical storage,
ensuring that commands can be executed properly.</p></div></div>
</div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/kotli/engine/get_started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Get started</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kotli/engine/template_overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Template overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#layer" class="table-of-contents__link toc-highlight">Layer</a></li><li><a href="#templateprocessor" class="table-of-contents__link toc-highlight">TemplateProcessor</a><ul><li><a href="#rule" class="table-of-contents__link toc-highlight">Rule</a></li></ul></li><li><a href="#templategenerator" class="table-of-contents__link toc-highlight">TemplateGenerator</a><ul><li><a href="#pathoutputgenerator" class="table-of-contents__link toc-highlight">PathOutputGenerator</a></li><li><a href="#zipoutputgenerator" class="table-of-contents__link toc-highlight">ZipOutputGenerator</a></li><li><a href="#gradleprojectgenerator" class="table-of-contents__link toc-highlight">GradleProjectGenerator</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>